{
  "hash": "7e62197b4af73a060d07199b58ec2d74",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Soil property mapping\"\nauthor: \"Alex Koiter\"\n---\n\n\n\n\n\n\n## Load libraries\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nsuppressPackageStartupMessages({\n  library(tidyverse)\n  library(terra)\n  library(patchwork)\n  library(sf)\n})\n```\n:::\n\n\n\n\n\n\n## Load data\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nag_data <- read_csv(here::here(\"./notebooks/ag_terrain_data.csv\"), show_col_types = FALSE) \n\nforest_data <- read_csv(here::here(\"./notebooks/forest_terrain_data.csv\"), show_col_types = FALSE) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\ntheme_right <-  theme(axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        legend.position = \"right\",\n        legend.box.spacing = unit(0, \"pt\"),\n        legend.margin=margin(0,0,0,3),\n        legend.justification=\"left\",\n        legend.title = element_text(hjust = 0))\n\ntheme_left <-  theme(axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        legend.position = \"left\",\n        legend.text.position = \"left\",\n        legend.box.spacing = unit(0, \"pt\"),\n        legend.margin=margin(0,3,0,0),\n        legend.justification=\"right\",\n        legend.title = element_text(hjust = 1))\n\ntheme_bottom <- theme(axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        legend.position = \"bottom\",\n        legend.text.position = \"bottom\",\n        legend.box.spacing = unit(0, \"pt\"),\n        legend.margin=margin(3,0,0,0),\n        legend.justification=\"top\")\n```\n:::\n\n\n\n\n\n\n\n## Agricultural soil properties\n### Geochemisty and colour\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nag_rast <- rast(ag_data)\ncrs(x = ag_rast, warn=FALSE) <- \"epsg:26914\"\n\ncoords <- read_csv(here::here(\"./notebooks/coords.csv\"), show_col_types = FALSE) %>% \n  st_as_sf(coords = c(\"long\", \"lat\"),  crs = 4326) %>%\n  st_transform(crs = 26914)\n\na_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = a_c)) +\n  scale_fill_viridis_c(name = bquote(italic(\"a*\")), breaks = seq(2.5, 4, 0.5)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nb_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = b_c)) +\n  scale_fill_viridis_c(name = bquote(italic(\"b*\")), breaks = seq(7, 10, 1)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nc_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = c_c)) +\n  scale_fill_viridis_c(name = bquote(italic(\"c*\")), breaks = seq(7, 11, 1)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) + \n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nh_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = h_c)) +\n  scale_fill_viridis_c(name = bquote(italic(\"h*\")), breaks = seq(1.15, 1.25, 0.02)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nx_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = x_c)) +\n  scale_fill_viridis_c(name = bquote(italic(\"x\")), breaks = seq(18, 26, 2)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\n\nca <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = ca)) +\n  scale_fill_viridis_c(name = \"Ca\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nco <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = co)) +\n  scale_fill_viridis_c(name = \"Co\", breaks = seq(8, 11, 1)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\ncs <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = cs)) +\n  scale_fill_viridis_c(name = \"Cs\", breaks = seq(0.5, 1.1, 0.2), limits = c(0.4, 1.1)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nfe <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = fe)) +\n  scale_fill_viridis_c(name = \"Cs\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nli <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = li)) +\n  scale_fill_viridis_c(name = \"Li\", breaks = seq(14, 20, 2), limits = c(13, 20)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nla <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = la)) +\n  scale_fill_viridis_c(name = \"La\", breaks = seq(16, 20, 1), limits = c(16, 20)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nnb <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = nb)) +\n  scale_fill_viridis_c(name = \"Nb\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nni <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = ni)) +\n  scale_fill_viridis_c(name = \"Ni\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nrb <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = rb)) +\n  scale_fill_viridis_c(name = \"Rb\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nsr <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = sr)) +\n  scale_fill_viridis_c(name = \"Sr\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n```\n:::\n\n\n\n\n\n\n### Grain size, OM, elevation\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\ndem <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = elevation)) +\n  scale_fill_viridis_c(name = \"Elevation\", option = \"inferno\", limits = c(309, 312)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n# \n# ssa <- ggplot() +\n#   tidyterra::geom_spatraster(data = ag_rast, aes(fill = ssa)) +\n#   scale_fill_viridis_c(name = \"SSA\") +\n#   #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n#   theme_minimal(base_size = 12) +\n#   theme_right +\n#   scale_y_continuous(expand = c(0,0)) +\n#   scale_x_continuous(expand = c(0,0))\n# \n# organic <- ggplot() +\n#   tidyterra::geom_spatraster(data = ag_rast, aes(fill = organic)) +\n#   scale_fill_viridis_c(name = \"Organic\") +\n#   #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n#   theme_minimal(base_size = 12) +\n#   theme_left +\n#   scale_y_continuous(expand = c(0,0)) +\n#   scale_x_continuous(expand = c(0,0))\n\nscale_p <- ggplot() +\n  geom_sf(data = filter(coords, site == \"Agriculture\"), colour = \"white\") +\n  theme_void(base_size = 12)+\n  ggspatial::annotation_scale(location = \"bl\", width_hint = 0.4) +\n  ggspatial::annotation_north_arrow(location = \"bl\", pad_y  = unit(2, \"cm\"))\n```\n:::\n\n::: {#cell-fig-ag_map .cell}\n\n```{.r .cell-code .hidden}\n#| fig-width: 14\n#| fig-asp: 2\n#| label: fig-ag_map\n#| fig-cap: Kriged maps of select colour and geochemical properties and elevtion across the agricultural site.\n\nca + co + cs + fe + li + la + nb + ni + rb + sr + a_col + b_col + c_col + h_col + x_col + dem + scale_p + plot_layout(ncol = 3) \n```\n\n::: {.cell-output-display}\n![Kriged maps of select colour and geochemical properties and elevtion across the agricultural site.](property_maps_files/figure-jats/fig-ag_map-1.png){#fig-ag_map}\n:::\n:::\n\n\n\n\n\n\n\n\n\n## Forest soil properties\n### Geochemisty and colour\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nforest_rast <- rast(forest_data)\ncrs(x = forest_rast, warn=FALSE) <- \"epsg:26914\"\n\nh_col_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = h_c)) +\n  scale_fill_viridis_c(name = bquote(italic(\"h*\"))) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nx_col_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = x_c)) +\n  scale_fill_viridis_c(name = bquote(italic(\"x\"))) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) + \n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nca_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = ca)) +\n  scale_fill_viridis_c(name = \"Ca\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nco_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = co)) +\n  scale_fill_viridis_c(name = \"Co\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\ncs_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = cs)) +\n  scale_fill_viridis_c(name = \"Cs\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nla_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = la)) +\n  scale_fill_viridis_c(name = \"La\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nli_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = li)) +\n  scale_fill_viridis_c(name = \"Li\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nnb_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = nb)) +\n  scale_fill_viridis_c(name = \"Nb\") +\n  #geom_sf(data = filter(coords, site == \"Forest\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nni_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = ni)) +\n  scale_fill_viridis_c(name = \"Ni\") +\n  #geom_sf(data = filter(coords, site == \"Forest\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nsr_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = sr)) +\n  scale_fill_viridis_c(name = \"Sr\") +\n  #geom_sf(data = filter(coords, site == \"Forest\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n```\n:::\n\n\n\n\n\n\n### Grain size, OM, elevation\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\ndem_forest <- ggplot() +\n  tidyterra::geom_spatraster(data = forest_rast, aes(fill = elevation)) +\n  scale_fill_viridis_c(name = \"Elevation\", option = \"inferno\") +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_minimal(base_size = 12) +\n  theme_bottom +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\n# ssa_forest <- ggplot() +\n#   tidyterra::geom_spatraster(data = forest_rast, aes(fill = ssa)) +\n#   scale_fill_viridis_c(name = \"SSA\") +\n#   #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n#   theme_minimal(base_size = 12) +\n#   theme_right +\n#   scale_y_continuous(expand = c(0,0)) +\n#   scale_x_continuous(expand = c(0,0))\n# \n# organic_forest <- ggplot() +\n#   tidyterra::geom_spatraster(data = forest_rast, aes(fill = organic)) +\n#   scale_fill_viridis_c(name = \"Organic\") +\n#   #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n#   theme_minimal(base_size = 12) +\n#   theme_left +\n#   scale_y_continuous(expand = c(0,0)) +\n#   scale_x_continuous(expand = c(0,0))\n\nscale_p_forest <- ggplot() +\n  geom_sf(data = filter(coords, site == \"Forest\"), colour = \"white\") +\n  theme_void(base_size = 12)+\n  ggspatial::annotation_scale(location = \"bl\", width_hint = 0.3) +\n  ggspatial::annotation_north_arrow(location = \"bl\", pad_y  = unit(2, \"cm\"))\n```\n:::\n\n::: {#cell-fig-forest_map .cell}\n\n```{.r .cell-code .hidden}\n#| fig-width: 12\n#| fig-asp: 1.3\n#| label: fig-forest_map\n#| fig-cap: Kriged map of select colour and geochemical properties and elevation across the forested site.\n\nca_forest + co_forest + cs_forest + la_forest + li_forest + nb_forest + ni_forest + sr_forest + h_col_forest + x_col_forest + dem_forest + scale_p_forest +\n  plot_layout(ncol = 3) \n```\n\n::: {.cell-output-display}\n![Kriged map of select colour and geochemical properties and elevation across the forested site.](property_maps_files/figure-jats/fig-forest_map-1.png){#fig-forest_map}\n:::\n:::\n",
    "supporting": [
      "property_maps_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}